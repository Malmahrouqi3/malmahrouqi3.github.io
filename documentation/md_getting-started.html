<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SY496B9L99"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-SY496B9L99');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MFC: Getting Started</title>
<meta name=”keywords” content="exascale, fluid dynamics, cfd, computational fluid dynamics, compressible, hpc, bryngelson, colonius, subgrid, multiphase, frontier, summit, el capitan, aurora, amd gpu, gpu, nvidia"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
// This file is set as MATHJAX_CODEFILE in the Doxyfile. It configures how
// MathJax renders expressions in Markdown so that it is consistent with GitHub.
MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath:  [ ['$',  '$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true,
      ignoreClass: "line" // Ignore code blocks: https://web.archive.org/web/20120430100225/http://www.mathjax.org/docs/1.1/options/tex2jax.html
    },
    "HTML-CSS": {
      fonts: ["TeX"]
    }
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="icon.ico" type="image/x-icon" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MFC
   </div>
   <div id="projectbrief">High-fidelity multiphase flow simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_getting-started.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md117"></a></p>
<h1><a class="anchor" id="autotoc_md118"></a>
Fetching MFC</h1>
<p>You can either download MFC's <a href="https://github.com/MFlowCode/MFC/releases/latest">latest release from GitHub</a> or clone the repository:</p>
<div class="fragment"><div class="line">git clone https://github.com/MFlowCode/MFC.git</div>
<div class="line">cd MFC</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md119"></a>
Build Environment</h1>
<p>MFC can be built in multiple ways on various operating systems. Please select your desired configuration from the list below:</p>
<h2>*nix</h2>
<ul>
<li><b>On supported clusters:</b> Load environment modules</li>
</ul>
<div class="fragment"><div class="line">source ./mfc.sh load</div>
</div><!-- fragment --><ul>
<li><b>Via Aptitude:</b></li>
</ul>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt upgrade</div>
<div class="line">sudo apt install tar wget make cmake gcc g++      \</div>
<div class="line">                 python3 python3-dev python3-venv \</div>
<div class="line">                 openmpi-bin libopenmpi-dev       \</div>
<div class="line">                 libhdf5-dev libfftw3-dev         \</div>
<div class="line">                 libblas-dev liblapack-dev</div>
</div><!-- fragment --><p>If you wish to build MFC using <a href="https://developer.nvidia.com/hpc-sdk">NVIDIA's NVHPC SDK</a>, first follow the instructions <a href="https://developer.nvidia.com/nvidia-hpc-sdk-downloads">here</a>.</p>
<h2>Windows</h2>
<p>On Windows, you can either use Intel Compilers with the standard Microsoft toolchain, or the <a href="https://docs.microsoft.com/en-us/windows/wsl/">Windows Subsystem for Linux (WSL)</a> for a Linux experience.</p>
<details >
<summary >
Windows + WSL (Recommended)</summary>
<p></p>
<p></p>
<p>Install <a href="https://docs.microsoft.com/en-us/windows/wsl/">Windows Subsystem for Linux (WSL)</a> on Windows 11: Either</p><ol type="1">
<li>Open a terminal with administrator privileges and run the following command: <div class="fragment"><div class="line">wsl --install</div>
</div><!-- fragment --> Or</li>
</ol>
<ol type="1">
<li>Open the Start menu, search for "Windows Features", and select "Turn Windows features on or off". Enable "Windows Subsystem for Linux" by checking the corresponding box.</li>
<li>Open the Microsoft Store, search for "Linux", and install your preferred distribution (e.g., <a href="https://apps.microsoft.com/store/detail/ubuntu/9PDXGNCFSCZV">Ubuntu</a>)</li>
</ol>
<p>Useful software to install for using WSL on Windows:</p><ul>
<li><a href="https://apps.microsoft.com/store/detail/windows-terminal/9N0DX20HK701">Windows Terminal</a></li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a> and the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">Remote - WSL</a> extension</li>
</ul>
<p>Once you have WSL installed, you can follow the instructions for *nix systems above (for Ubuntu, see <code>Via Aptitude</code> section).</p>
<p></p>
</details>
<details >
<summary >
Native Windows (Intel)</summary>
<p></p>
<p></p>
<p>Install the latest version of:</p><ul>
<li><a href="https://visualstudio.microsoft.com/">Microsoft Visual Studio Community</a></li>
<li>Intel® oneAPI Base Toolkit</li>
<li>Intel® oneAPI HPC Toolkit</li>
<li><a href="https://strawberryperl.com/">Strawberry Perl</a> (Install and add <code>C:\strawberry\perl\bin\perl.exe</code> or your installation path to your <a href="https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/">PATH</a>) Please note that Visual Studio must be installed first, and the oneAPI Toolkits need to be configured with the installed Visual Studio, even if you plan to use a different IDE.</li>
</ul>
<p>Then, to initialize your development environment, run the following command (or your installation path) in the command prompt: </p><div class="fragment"><div class="line">&quot;C:\Program Files (x86)\Intel\oneAPI\setvars.bat&quot;</div>
</div><!-- fragment --><p> Alternatively, you can run the following command in Powershell: </p><div class="fragment"><div class="line">cmd.exe &quot;/K&quot; &#39;&quot;C:\Program Files (x86)\Intel\oneAPI\setvars.bat&quot; &amp;&amp; powershell&#39;</div>
</div><!-- fragment --><p> You could verify the initialization by typing <code>where mpiexec</code> in the command prompt terminal (does not work in Powershell), which should return the path to the Intel MPI executable. To continue following this guide, please stay in the initialized terminal window. Replace <code>./mfc.sh</code> with <code>.\mfc.bat</code> for all commands.</p>
<p>If <code>.\mfc.bat build</code> produces errors, please run the command again. Repeating this process three times should resolve all errors (once each for pre_process, simulation, and post_process). If the same error persists after each attempt, please verify that you have installed all required software and properly initialized the development environment. If uncertain, you could try deleting the build directory and starting over.</p>
<p>You will also have access to the <code>.sln</code> Microsoft Visual Studio solution files for an IDE (Integrated Development Environment).</p>
<p></p>
</details>
<h3>MacOS</h3>
<p>Using <a href="https://brew.sh/">Homebrew</a> you can install the necessary dependencies before configuring your environment:</p>
<div class="fragment"><div class="line">brew install coreutils python cmake fftw hdf5 gcc boost open-mpi lapack</div>
<div class="line">echo -e &quot;export BOOST_INCLUDE=&#39;$(brew --prefix --installed boost)/include&#39;&quot; | tee -a ~/.bash_profile ~/.zshrc</div>
<div class="line">. ~/.bash_profile 2&gt;/dev/null || . ~/.zshrc 2&gt;/dev/null</div>
<div class="line">! [ -z &quot;${BOOST_INCLUDE+x}&quot; ] &amp;&amp; echo &#39;Environment is ready!&#39; || echo &#39;Error: $BOOST_INCLUDE is unset. Please adjust the previous commands to fit with your environment.&#39;</div>
</div><!-- fragment --><p>They will download the dependencies MFC requires to build itself.</p>
<h1><a class="anchor" id="autotoc_md120"></a>
Building MFC</h1>
<p>MFC can be built with support for various (compile-time) features:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Feature   </th><th class="markdownTableHeadCenter">Enable   </th><th class="markdownTableHeadCenter">Disable   </th><th class="markdownTableHeadCenter">Default   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>MPI</b>   </td><td class="markdownTableBodyCenter"><code>--mpi</code>   </td><td class="markdownTableBodyCenter"><code>--no-mpi</code>   </td><td class="markdownTableBodyCenter">On   </td><td class="markdownTableBodyNone">Allows MFC to run on multiple processors (and nodes).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>GPU</b>   </td><td class="markdownTableBodyCenter"><code>--gpu</code>   </td><td class="markdownTableBodyCenter"><code>--no-gpu</code>   </td><td class="markdownTableBodyCenter">Off   </td><td class="markdownTableBodyNone">Enables GPU acceleration via OpenACC.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Debug</b>   </td><td class="markdownTableBodyCenter"><code>--debug</code>   </td><td class="markdownTableBodyCenter"><code>--no-debug</code>   </td><td class="markdownTableBodyCenter">Off   </td><td class="markdownTableBodyNone">Requests the compiler build MFC in debug mode.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>GCov</b>   </td><td class="markdownTableBodyCenter"><code>--gcov</code>   </td><td class="markdownTableBodyCenter"><code>--no-gcov</code>   </td><td class="markdownTableBodyCenter">Off   </td><td class="markdownTableBodyNone">Build MFC with coverage flags on.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Unified Memory</b>   </td><td class="markdownTableBodyCenter"><code>--unified</code>   </td><td class="markdownTableBodyCenter"><code>--no-unified</code>   </td><td class="markdownTableBodyCenter">Off   </td><td class="markdownTableBodyNone">Build MFC with unified CPU/GPU memory (GH200 superchip only)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>Single</b>   </td><td class="markdownTableBodyCenter"><code>--single</code>   </td><td class="markdownTableBodyCenter"><code>--no-single</code>   </td><td class="markdownTableBodyCenter">Off   </td><td class="markdownTableBodyNone">Build MFC in single precision   </td></tr>
</table>
<p><em>⚠️ The <code>--gpu</code> option requires that your compiler supports OpenACC for Fortran for your target GPU architecture.</em></p>
<p>When these options are given to <code>mfc.sh</code>, they will be remembered when you issue future commands. You can enable and disable features anytime by passing any of the arguments above. For example, if you previously built MFC with MPI support and no longer wish to run using MPI, you can pass <code>--no-mpi</code> once, making the change permanent.</p>
<p>MFC comprises three codes, each being a separate <em>target</em>. By default, all targets (<code>pre_process</code>, <code>simulation</code>, and <code>post_process</code>) are selected. To only select a subset, use the <code>-t</code> (i.e., <code>--targets</code>) argument. For a detailed list of options, arguments, and features, please refer to <code>./mfc.sh build --help</code>.</p>
<p>Most first-time users will want to build MFC using 8 threads (or more!) with MPI support: </p><div class="fragment"><div class="line">./mfc.sh build -j 8</div>
</div><!-- fragment --><p>Some examples:</p><ul>
<li>Build MFC using 8 threads with MPI and GPU acceleration: <code>./mfc.sh build --gpu -j 8</code>.</li>
<li>Build MFC using a single thread without MPI, GPU, and Debug support: <code>./mfc.sh build --no-mpi</code>.</li>
<li>Build MFC's <code>simulation</code> code in Debug mode with MPI and GPU support: <code>./mfc.sh build --debug --gpu -t simulation</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md121"></a>
Using Containers</h1>
<p>Instead of building MFC from scratch, you can use containers to quickly access a pre-built version of MFC and its dependencies. In brief, you can run the latest MFC container: </p><div class="fragment"><div class="line">docker run -it --rm --entrypoint bash sbryngelson/mfc:latest-cpu</div>
</div><!-- fragment --><p> Please refer to the <a href="https://mflowcode.github.io/documentation/docker.html">Docker</a> document for more information.</p>
<h1><a class="anchor" id="autotoc_md122"></a>
Running the Test Suite</h1>
<p>Run MFC's test suite with 8 threads: </p><div class="fragment"><div class="line">./mfc.sh test -j 8</div>
</div><!-- fragment --><p>Please refer to the <a class="el" href="md_testing.html">Testing</a> document for more information.</p>
<h1><a class="anchor" id="autotoc_md123"></a>
Running an Example Case</h1>
<p>MFC has example cases in the <code>examples</code> folder. You can run such a case interactively using 2 tasks by typing:</p>
<div class="fragment"><div class="line">./mfc.sh run examples/2D_shockbubble/case.py -n 2</div>
</div><!-- fragment --><p>Please refer to the <a class="el" href="md_running.html">Running</a> document for more information on <code>case.py</code> files and how to run them. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
